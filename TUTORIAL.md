# MEMEFinder 使用教程

## 🎉 第一阶段完成！

恭喜！我已经为你完成了表情包查找器的**基础框架和图源管理**功能。

## ✅ 已实现的功能

### 1. Windows GUI界面
- 使用 tkinter 创建的友好图形界面
- 三个主要标签页：图源管理、图片处理、图片搜索
- 实时状态更新和日志输出

### 2. 数据库系统
- SQLite3 数据库存储所有数据
- 图源管理表 (image_sources)
- 图片信息表 (images)
- 支持索引和外键关联

### 3. 图源管理功能
- ✅ 添加/删除图源文件夹
- ✅ 启用/禁用图源
- ✅ 右键菜单快速操作
- ✅ 打开文件夹位置
- ✅ 查看添加和扫描时间

### 4. 图片扫描功能
- ✅ 自动扫描图源文件夹
- ✅ 支持多种图片格式 (.jpg, .png, .bmp, .webp, .gif, .tiff)
- ✅ 基于MD5哈希的智能去重
- ✅ 增量扫描（只处理新图片）
- ✅ 统计信息实时更新

### 5. 数据持久化
- ✅ 所有配置和数据保存在本地
- ✅ 程序重启后数据不丢失
- ✅ 支持数据导出和备份

## 📖 快速开始

### 步骤1: 安装依赖

```powershell
pip install -r requirements.txt
```

### 步骤2: 启动程序

```powershell
python meme_finder_gui.py
```

### 步骤3: 添加图源

1. 点击 **"➕ 添加图源文件夹"** 按钮
2. 选择包含表情包的文件夹（比如：`D:\MEMEFinder\imgs`）
3. 重复操作可添加多个文件夹

### 步骤4: 扫描图片

1. 点击 **"🔍 扫描新图片"** 按钮
2. 程序会自动扫描所有启用的图源
3. 查看状态栏了解扫描结果

### 步骤5: 管理图源

- **打开文件夹**: 右键点击图源 → 选择"打开文件夹"
- **禁用图源**: 右键点击图源 → 选择"启用/禁用"
- **删除图源**: 选中图源 → 点击"🗑️ 删除选中"

## 🎯 界面说明

### 图源管理页面

```
┌─────────────────────────────────────────────────────────┐
│ ➕ 添加图源文件夹  🗑️ 删除选中  🔄 刷新列表  🔍 扫描新图片 │
├─────────────────────────────────────────────────────────┤
│ ID │ 路径              │ 添加时间     │ 最后扫描     │ 状态 │
│ 1  │ D:\Memes\Folder1  │ 2025-11-07   │ 2025-11-07   │ ✓ 启用│
│ 2  │ D:\Memes\Folder2  │ 2025-11-07   │ 未扫描       │ ✓ 启用│
├─────────────────────────────────────────────────────────┤
│ 统计信息: 总图片: 100 | 已处理: 20 | 未处理: 80      │
└─────────────────────────────────────────────────────────┘
```

### 图片处理页面（待实现）

```
┌─────────────────────────────────────────────────────────┐
│ ▶️ 开始处理  ⏸️ 暂停  ⏹️ 停止                             │
├─────────────────────────────────────────────────────────┤
│ 处理进度                                                 │
│ [████████░░░░░░░░░░] 40%                                │
│ 正在处理: image_001.jpg (45/100)                        │
├─────────────────────────────────────────────────────────┤
│ 处理日志                                                 │
│ [10:30:15] 开始OCR识别...                               │
│ [10:30:16] 识别文本: "这是一个表情包"                    │
│ [10:30:17] 情绪分析: 正向 (0.85)                        │
└─────────────────────────────────────────────────────────┘
```

### 图片搜索页面（待实现）

```
┌─────────────────────────────────────────────────────────┐
│ 关键词: [快乐____________]  情绪: [正向▼]  🔍 搜索      │
├─────────────────────────────────────────────────────────┤
│ 搜索结果                                                 │
│ 文本内容       │ 情绪 │ 正向分数 │ 负向分数 │ 图片路径    │
│ 今天很快乐     │ 正向 │ 0.92     │ 0.08     │ D:\...     │
│ 开心每一天     │ 正向 │ 0.88     │ 0.12     │ D:\...     │
└─────────────────────────────────────────────────────────┘
```

## 🔍 功能测试

运行测试脚本验证功能：

```powershell
python test_gui.py
```

应该看到类似输出：

```
============================================================
MEMEFinder 数据库功能测试
============================================================

[测试1] 添加图源...
✓ 成功添加图源: D:\MEMEFinder\imgs

[测试2] 获取图源列表...
✓ 找到 1 个图源

[测试3] 添加测试图片...
✓ 添加图片: test1.jpg
✓ 添加图片: test2.jpg
✓ 添加图片: test3.jpg

...

测试完成！所有功能正常工作。
============================================================
```

## 📁 项目文件说明

```
MEMEFinder/
├── meme_finder_gui.py      # 主程序（GUI界面）
│   ├── ImageDatabase       # 数据库管理类
│   └── MemeFinderGUI      # GUI界面类
│
├── ocr_cli.py              # OCR命令行工具（已有）
├── test_gui.py             # 功能测试脚本
├── requirements.txt        # Python依赖包
├── README.md              # 项目说明
├── TUTORIAL.md            # 使用教程（本文件）
│
├── meme_finder.db         # 数据库文件（运行后生成）
│
└── imgs/                  # 测试图片文件夹
    ├── *.jpg
    └── *.png
```

## 🚀 下一步计划

### 第二阶段：OCR和情绪分析

接下来将实现：

1. **OCR文本识别**
   - 集成现有的 `ocr_cli.py` 功能
   - 批量处理图片
   - 提取文本内容

2. **文本过滤**
   - 识别并过滤水印文字
   - 过滤网址链接 (http://, www., .com等)
   - 保留有效的表情包文字

3. **情绪分析**
   - 使用 PaddleNLP Senta模型
   - 计算正向/负向情绪分数
   - 自动分类（正向/负向/中性）

4. **搜索功能**
   - 关键词模糊匹配
   - 情绪筛选
   - 结果排序

### 建议实现顺序

```
✅ 1. 基础框架和图源管理（已完成）
🚧 2. 集成OCR识别
🚧 3. 文本过滤和清洗
🚧 4. 情绪分析
🚧 5. 搜索功能优化
📋 6. 图片预览功能
📋 7. 性能优化
```

## 💡 使用技巧

### 技巧1: 批量添加图源
如果你有多个表情包文件夹，建议：
- 先添加所有文件夹
- 然后一次性点击"扫描新图片"
- 这样可以避免重复扫描

### 技巧2: 管理大量图片
- 使用"禁用"功能暂时跳过某些图源
- 定期清理不需要的图源
- 数据库会自动去重，不用担心重复

### 技巧3: 备份数据
定期备份 `meme_finder.db` 文件：
```powershell
copy meme_finder.db meme_finder_backup_20251107.db
```

### 技巧4: 查看数据库
使用SQLite工具查看数据：
- [DB Browser for SQLite](https://sqlitebrowser.org/)
- 或者使用VS Code插件: SQLite

## ❓ 常见问题

### Q1: 程序启动后没有反应？
**A**: 检查是否有错误提示，确保已安装所有依赖：
```powershell
pip install -r requirements.txt
```

### Q2: 扫描后没有发现新图片？
**A**: 可能的原因：
- 图片格式不支持（只支持 .jpg, .png, .bmp, .webp, .gif, .tiff）
- 图片已经扫描过（基于MD5去重）
- 图源文件夹路径不正确

### Q3: 如何重新扫描已有图片？
**A**: 目前需要删除图源后重新添加，或者手动清理数据库。

### Q4: 数据库太大怎么办？
**A**: 可以定期清理不需要的图片记录，或者导出数据后重建数据库。

### Q5: 支持哪些图片格式？
**A**: 目前支持：
- JPG/JPEG
- PNG
- BMP
- WEBP
- GIF
- TIFF

## 📞 需要帮助？

如果遇到问题或需要新功能，可以：
1. 查看日志输出了解错误信息
2. 运行 `test_gui.py` 测试基础功能
3. 检查数据库文件是否正常

## 🎊 恭喜！

你已经完成了表情包查找器的基础搭建！

现在你可以：
- ✅ 管理多个图源文件夹
- ✅ 自动扫描和发现新图片
- ✅ 查看统计信息
- ✅ 准备进行下一步开发

**准备好继续开发OCR和情绪分析功能了吗？** 🚀
