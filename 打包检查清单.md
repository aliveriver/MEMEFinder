# MEMEFinder 多版本打包检查清单

## 📋 打包前检查

### 1. 环境准备
- [ ] Python 3.8+ 已安装
- [ ] 所有依赖已安装 (`pip install -r requirements.txt`)
- [ ] PyInstaller 已安装 (`pip install pyinstaller`)
- [ ] 代码测试通过

### 2. 版本配置
- [ ] 版本号已更新（如需要）
- [ ] 更新日志已准备
- [ ] 文档已更新

### 3. 资源文件
- [ ] `models/` 目录存在且包含模型文件
- [ ] ONNX模型文件完整
- [ ] SnowNLP数据文件完整

---

## 🔨 构建版本

### CPU通用版
```bash
python scripts/build_multi_version.py --version cpu
```

**检查项**:
- [ ] 构建无错误
- [ ] `releases/MEMEFinder_cpu/` 目录已创建
- [ ] `MEMEFinder_cpu.exe` 存在
- [ ] 文件大小约 150-200MB
- [ ] `版本说明.txt` 已生成

### GPU-CUDA11版
```bash
python scripts/build_multi_version.py --version gpu-cuda11
```

**检查项**:
- [ ] onnxruntime-gpu 1.16.3 已安装
- [ ] 构建无错误
- [ ] `releases/MEMEFinder_gpu-cuda11/` 目录已创建
- [ ] `MEMEFinder_gpu-cuda11.exe` 存在
- [ ] 文件大小约 350-450MB
- [ ] CUDA 11.8 DLL文件已包含
- [ ] `版本说明.txt` 已生成

### GPU-CUDA12版
```bash
python scripts/build_multi_version.py --version gpu-cuda12
```

**检查项**:
- [ ] onnxruntime-gpu 1.17.0 已安装
- [ ] 构建无错误
- [ ] `releases/MEMEFinder_gpu-cuda12/` 目录已创建
- [ ] `MEMEFinder_gpu-cuda12.exe` 存在
- [ ] 文件大小约 400-500MB
- [ ] CUDA 12.x DLL文件已包含
- [ ] `版本说明.txt` 已生成

---

## ✅ 功能测试

### CPU版本测试

**测试环境**: 无NVIDIA显卡的电脑

- [ ] 程序能正常启动
- [ ] GUI界面显示正常
- [ ] 能添加图源
- [ ] 能扫描图片
- [ ] OCR功能正常（使用CPU）
- [ ] 搜索功能正常
- [ ] 无崩溃或闪退
- [ ] 日志文件正常生成

### GPU-CUDA11版本测试

**测试环境**: CUDA 11.x + GTX/RTX 20系列

- [ ] 程序能正常启动
- [ ] GPU初始化成功（查看日志）
- [ ] OCR使用GPU加速
- [ ] GPU失败时能自动降级到CPU
- [ ] 强制CPU模式正常工作
- [ ] 识别速度明显快于CPU版本
- [ ] 无内存泄漏
- [ ] 日志显示GPU相关信息

### GPU-CUDA12版本测试

**测试环境**: CUDA 12.x + RTX 30/40系列

- [ ] 程序能正常启动
- [ ] GPU初始化成功（查看日志）
- [ ] OCR使用GPU加速
- [ ] GPU失败时能自动降级到CPU
- [ ] 强制CPU模式正常工作
- [ ] 识别速度最快
- [ ] 无内存泄漏
- [ ] 日志显示GPU相关信息

---

## 📦 打包与压缩

### 文件准备
- [ ] 删除不必要的文件
- [ ] 清理日志文件
- [ ] 检查文件权限

### 压缩打包
```bash
cd releases
# CPU版本
7z a MEMEFinder_cpu.zip MEMEFinder_cpu/*

# GPU-CUDA11版本
7z a MEMEFinder_gpu-cuda11.zip MEMEFinder_gpu-cuda11/*

# GPU-CUDA12版本
7z a MEMEFinder_gpu-cuda12.zip MEMEFinder_gpu-cuda12/*
```

**检查项**:
- [ ] CPU版本 zip 大小: 约 100-150MB
- [ ] GPU-CUDA11版本 zip 大小: 约 300-400MB
- [ ] GPU-CUDA12版本 zip 大小: 约 350-450MB
- [ ] 压缩包能正常解压
- [ ] 解压后文件完整

---

## 📄 文档准备

### 必备文档
- [ ] `README.md` - 项目说明
- [ ] `版本选择指南.md` - 用户选择指南
- [ ] `docs/多版本发布指南.md` - 详细发布说明
- [ ] `CHANGELOG.md` - 更新日志（如需要）

### 发布说明
准备 GitHub Release 说明，包括：
- [ ] 版本号和发布日期
- [ ] 新功能和改进
- [ ] Bug修复
- [ ] 版本选择指南链接
- [ ] 下载链接和文件大小
- [ ] 系统要求
- [ ] 已知问题

---

## 🚀 发布流程

### 1. GitHub Release

1. **创建Release**
   - [ ] 创建新tag（如 v1.0.0）
   - [ ] 填写发布说明
   - [ ] 上传3个zip文件

2. **文件清单**
   ```
   - MEMEFinder_cpu.zip (约 150MB)
   - MEMEFinder_gpu-cuda11.zip (约 400MB)
   - MEMEFinder_gpu-cuda12.zip (约 450MB)
   ```

3. **发布说明模板**
   ```markdown
   # MEMEFinder v1.0.0
   
   ## 📥 下载
   
   根据您的系统选择合适的版本：
   
   | 版本 | 适用 | 下载 | 大小 |
   |------|------|------|------|
   | CPU通用版 | 所有用户 | [下载](link) | 150MB |
   | GPU-CUDA11版 | GTX 10/16/20系列 | [下载](link) | 400MB |
   | GPU-CUDA12版 | RTX 30/40系列 | [下载](link) | 450MB |
   
   **不知道选哪个？** 查看 [版本选择指南](link)
   
   ## ✨ 新功能
   - ...
   
   ## 🐛 修复
   - ...
   
   ## 📝 详细说明
   查看完整文档: [多版本发布指南](link)
   ```

### 2. 更新文档

- [ ] 更新主 README.md 的下载链接
- [ ] 更新版本选择指南
- [ ] 更新用户文档
- [ ] 更新项目Wiki（如有）

### 3. 测试下载

- [ ] 从Release页面下载各个版本
- [ ] 在干净的系统上测试安装
- [ ] 验证所有功能正常

---

## 🔍 质量检查

### 性能测试
- [ ] CPU版本: 1000张图片扫描时间
- [ ] GPU-CUDA11版本: 1000张图片扫描时间
- [ ] GPU-CUDA12版本: 1000张图片扫描时间
- [ ] 内存占用正常（<1GB）
- [ ] 无内存泄漏

### 兼容性测试
- [ ] Windows 10 (x64)
- [ ] Windows 11 (x64)
- [ ] 无GPU环境
- [ ] CUDA 11.x环境
- [ ] CUDA 12.x环境

### 稳定性测试
- [ ] 长时间运行无崩溃（4小时+）
- [ ] 处理大量图片无问题（10000+）
- [ ] 异常情况恢复正常
- [ ] 日志正确记录

---

## 📊 发布后检查

### 用户反馈
- [ ] 监控Issues
- [ ] 收集用户反馈
- [ ] 记录常见问题

### 数据统计
- [ ] 各版本下载量
- [ ] 用户系统分布
- [ ] 问题报告统计

---

## 🔄 常见问题处理

### 构建失败
1. 检查Python环境
2. 清理build和dist目录
3. 重新安装依赖
4. 查看构建日志

### 程序闪退
1. 检查DLL文件
2. 查看日志文件
3. 测试CPU模式
4. 验证模型文件

### 文件过大
1. 检查是否包含不必要的文件
2. 优化资源文件
3. 使用UPX压缩（可选）

---

## 📅 发布计划

### 版本规划
- [ ] v1.0.0 - 初始多版本发布
- [ ] v1.1.0 - 功能增强
- [ ] v1.2.0 - 性能优化

### 时间安排
1. 构建和测试: 2-3天
2. 文档准备: 1天
3. 发布和推广: 1天

---

## ✅ 最终检查清单

发布前最后确认：

- [ ] 所有版本构建成功
- [ ] 所有版本测试通过
- [ ] 文档完整且最新
- [ ] 压缩包已准备好
- [ ] GitHub Release已创建
- [ ] 下载链接可用
- [ ] 版本说明清晰
- [ ] 已知问题已说明
- [ ] 技术支持渠道畅通

**准备好了吗？发布吧！** 🚀
